{"version":3,"file":"ResizeHandler.e19875b3.mjs","sources":["../node_modules/@ui5/webcomponents-base/dist/delegate/ResizeHandler.js"],"sourcesContent":["import { instanceOfUI5Element } from \"../UI5Element.js\";\nlet resizeObserver;\nconst observedElements = new Map();\nconst getResizeObserver = () => {\n    if (!resizeObserver) {\n        resizeObserver = new window.ResizeObserver(entries => {\n            window.requestAnimationFrame(() => {\n                entries.forEach(entry => {\n                    const callbacks = observedElements.get(entry.target);\n                    // Callbacks could be async and we need to handle returned promises to comply with the eslint \"no-misused-promises\" rule.\n                    // Although Promise.all awaits all, we don't await the additional task after calling the callbacks and should not make any difference.\n                    callbacks && Promise.all(callbacks.map((callback) => callback()));\n                });\n            });\n        });\n    }\n    return resizeObserver;\n};\nconst observe = (element, callback) => {\n    const callbacks = observedElements.get(element) || [];\n    // if no callbacks have been added for this element - start observing it\n    if (!callbacks.length) {\n        getResizeObserver().observe(element);\n    }\n    // save the callbacks in an array\n    observedElements.set(element, [...callbacks, callback]);\n};\nconst unobserve = (element, callback) => {\n    const callbacks = observedElements.get(element) || [];\n    if (callbacks.length === 0) {\n        return;\n    }\n    const filteredCallbacks = callbacks.filter((fn) => fn !== callback);\n    if (filteredCallbacks.length === 0) {\n        getResizeObserver().unobserve(element);\n        observedElements.delete(element);\n    }\n    else {\n        observedElements.set(element, filteredCallbacks);\n    }\n};\n/**\n * Allows to register/deregister resize observers for a DOM element\n *\n * @public\n * @class\n  */\nclass ResizeHandler {\n    /**\n     * @static\n     * @public\n     * @param {*} element UI5 Web Component or DOM Element to be observed\n     * @param {*} callback Callback to be executed\n     */\n    static register(element, callback) {\n        let effectiveElement = element;\n        if (instanceOfUI5Element(effectiveElement)) {\n            effectiveElement = effectiveElement.getDomRef();\n        }\n        if (effectiveElement instanceof HTMLElement) {\n            observe(effectiveElement, callback);\n        }\n        else {\n            console.warn(\"Cannot register ResizeHandler for element\", element); // eslint-disable-line\n        }\n    }\n    /**\n     * @static\n     * @public\n     * @param {*} element UI5 Web Component or DOM Element to be unobserved\n     * @param {*} callback Callback to be removed\n     */\n    static deregister(element, callback) {\n        let effectiveElement = element;\n        if (instanceOfUI5Element(effectiveElement)) {\n            effectiveElement = effectiveElement.getDomRef();\n        }\n        if (effectiveElement instanceof HTMLElement) {\n            unobserve(effectiveElement, callback);\n        }\n        else {\n            console.warn(\"Cannot deregister ResizeHandler for element\", element); // eslint-disable-line\n        }\n    }\n}\nexport default ResizeHandler;\n//# sourceMappingURL=ResizeHandler.js.map"],"names":["resizeObserver","observedElements","getResizeObserver","entries","entry","callbacks","callback","observe","element","unobserve","filteredCallbacks","fn","ResizeHandler","effectiveElement","instanceOfUI5Element"],"mappings":";AACA,IAAIA;AACJ,MAAMC,IAAmB,oBAAI,OACvBC,IAAoB,OACjBF,MACDA,IAAiB,IAAI,OAAO,eAAe,CAAAG,MAAW;AAClD,SAAO,sBAAsB,MAAM;AAC/B,IAAAA,EAAQ,QAAQ,CAAAC,MAAS;AACrB,YAAMC,IAAYJ,EAAiB,IAAIG,EAAM,MAAM;AAGnD,MAAAC,KAAa,QAAQ,IAAIA,EAAU,IAAI,CAACC,MAAaA,EAAU,CAAA,CAAC;AAAA,IACpF,CAAiB;AAAA,EACjB,CAAa;AACb,CAAS,IAEEN,IAELO,IAAU,CAACC,GAASF,MAAa;AACnC,QAAMD,IAAYJ,EAAiB,IAAIO,CAAO,KAAK,CAAA;AAEnD,EAAKH,EAAU,UACXH,EAAmB,EAAC,QAAQM,CAAO,GAGvCP,EAAiB,IAAIO,GAAS,CAAC,GAAGH,GAAWC,CAAQ,CAAC;AAC1D,GACMG,IAAY,CAACD,GAASF,MAAa;AACrC,QAAMD,IAAYJ,EAAiB,IAAIO,CAAO,KAAK,CAAA;AACnD,MAAIH,EAAU,WAAW;AACrB;AAEJ,QAAMK,IAAoBL,EAAU,OAAO,CAACM,MAAOA,MAAOL,CAAQ;AAClE,EAAII,EAAkB,WAAW,KAC7BR,EAAmB,EAAC,UAAUM,CAAO,GACrCP,EAAiB,OAAOO,CAAO,KAG/BP,EAAiB,IAAIO,GAASE,CAAiB;AAEvD;AAOA,MAAME,EAAc;AAAA,EAOhB,OAAO,SAASJ,GAASF,GAAU;AAC/B,QAAIO,IAAmBL;AACvB,IAAIM,EAAqBD,CAAgB,MACrCA,IAAmBA,EAAiB,cAEpCA,aAA4B,cAC5BN,EAAQM,GAAkBP,CAAQ,IAGlC,QAAQ,KAAK,6CAA6CE,CAAO;AAAA,EAExE;AAAA,EAOD,OAAO,WAAWA,GAASF,GAAU;AACjC,QAAIO,IAAmBL;AACvB,IAAIM,EAAqBD,CAAgB,MACrCA,IAAmBA,EAAiB,cAEpCA,aAA4B,cAC5BJ,EAAUI,GAAkBP,CAAQ,IAGpC,QAAQ,KAAK,+CAA+CE,CAAO;AAAA,EAE1E;AACL;"}